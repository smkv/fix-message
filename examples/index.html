<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Fix Message Web Component</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <style>
        #messagesTable td.selected:before {
            content: 'â–¶';
        }
    </style>
</head>
<body>
<div class="container">
    <h1>Fix Message Web Component</h1>
    <table id="messagesTable">
    </table>
    <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="mode" id="modeString" value="string">
        <label class="form-check-label" for="modeString">string</label>
    </div>
    <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="mode" id="modeCompact" value="compact">
        <label class="form-check-label" for="modeCompact">compact</label>
    </div>
    <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="mode" id="modeList" value="list">
        <label class="form-check-label" for="modeList">list</label>
    </div>
    <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="mode" id="modeTable" value="table" checked>
        <label class="form-check-label" for="modeTable">table</label>
    </div>
    <hr/>
    <fix-message id="fixMessage" message="" mode="table" delimiter="|"></fix-message>
</div>
<script src="../src/fix-message.mjs" type="module"></script>
<script>
    const messagesTable = document.getElementById('messagesTable');
    const fixMessage = document.getElementById('fixMessage');
    fetch('fix-messages.txt')
        .then(response => response.text())
        .then(text => text.split('\n').filter(Boolean))
        .then(messages => {
            messages.forEach(message => {
                const tr = document.createElement('tr');
                const td = document.createElement('td');
                const a = document.createElement('a');
                a.textContent = message;
                a.href = '#';
                a.addEventListener('click', () => {
                    messagesTable.querySelectorAll('td.selected').forEach(td => td.classList.remove('selected'));
                    fixMessage.setAttribute('message', message);
                    td.classList.add('selected');
                });
                td.appendChild(a);
                tr.appendChild(td);
                messagesTable.appendChild(tr);
            });
        });

    document.querySelectorAll('input[name="mode"]').forEach(input => {
        if (input.checked) {
            fixMessage.setAttribute('mode', input.value);
        }
        input.addEventListener('change', () => {
            if (input.checked) {
                fixMessage.setAttribute('mode', input.value);
            }
        });
    });

</script>
</body>
</html>